(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(d){return d},b.d=function(d,e,f){b.o(d,e)||Object.defineProperty(d,e,{configurable:!1,enumerable:!0,get:f})},b.n=function(d){var e=d&&d.__esModule?function(){return d['default']}:function(){return d};return b.d(e,'a',e),e},b.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)},b.p='',b(b.s=53)})({5:function(a){var c=function(d){this.el=d,this.mapEl=d.querySelector('.googlemap__canvas'),this.searchEl=d.querySelector('.form__control__search');var e=d.querySelector('.form__control--icon--right');this.isExtended=d.classList.contains('googlemap--extended'),this.isDraggable=d.classList.contains('googlemap--draggable'),this.draggableButtonEl=document.querySelector('[data-googlemap-draggable-link]'),this.marker=null,this.map=new google.maps.Map(this.mapEl,{center:{lat:52,lng:46.5},scrollwheel:!1,zoom:6,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1}),this.autocomplete=new google.maps.places.Autocomplete(this.searchEl,{}),google.maps.event.addListener(this.autocomplete,'place_changed',function(){this.onMapAutocomplete()}.bind(this)),this.isExtended&&this.loadLocations(),e&&e.addEventListener('click',function(){this.onMapAutocomplete()}.bind(this))};c.prototype.updateDraggableButton_=function(){var d='';d+='?entry.1458261258='+this.marker.getPosition().lat(),d+='&entry.1058533728='+this.marker.getPosition().lng();var e=this.autocomplete.getPlace();if(e.address_components)for(var g,f=0;g=e.address_components[f];++f)'street_number'===g.types[0]&&(d+='&entry.502610227='+g.long_name),'route'===g.types[0]&&(d+='&entry.652280183='+g.long_name),'locality'===g.types[0]&&(d+='&entry.789012978='+g.long_name),'administrative_area_level_1'===g.types[0],'country'===g.types[0]&&(d+='&entry.23917865='+g.short_name),'postal_code'===g.types[0]&&(d+='&entry.272782401='+g.long_name);this.draggableButtonEl.href=this.draggableButtonEl.dataset.formUrl,this.draggableButtonEl.href+=d,this.draggableButtonEl.removeAttribute('disabled')},c.prototype.selectFirstResult_=function(d){var e=new google.maps.places.AutocompleteService;e.getPlacePredictions({input:d.name,offset:d.name.length},function(f){if(f&&f.length){var h=new google.maps.places.PlacesService(this.searchEl);h.getDetails({reference:f[0].reference},function(j){this.onMapAutocomplete(j)}.bind(this))}}.bind(this))},c.prototype.onMapAutocomplete=function(d){var e=d||this.autocomplete.getPlace();if('undefined'==typeof e.address_components)return void this.selectFirstResult_(e);e&&e.geometry&&(e.geometry.viewport?this.map.fitBounds(e.geometry.viewport):(this.map.setCenter(e.geometry.location),this.map.setZoom(9)),this.isDraggable&&(this.marker&&this.marker.setMap(null),this.marker=new google.maps.Marker({draggable:!0,position:e.geometry.location,map:this.map}),google.maps.event.addListener(this.marker,'dragend',this.updateDraggableButton_.bind(this)),this.updateDraggableButton_()))},c.prototype.drawLocations=function(d){var e;[].forEach.call(d,function(f){var g=parseFloat(f.Latitude),h=parseFloat(f.Longitude),k=new google.maps.Marker({position:{lat:g,lng:h},map:this.map,title:f.Name});k.addListener('click',function(){e&&e.close();var l='<div class="googlemap__infowindow-title">'+f.Name+'</div>';l+='<a class="googlemap__infowindow-link" target="_blank" href="'+f.URL+'">View details</a>',e=new google.maps.InfoWindow({content:l}),e.open(this.map,k)}.bind(this))}.bind(this))},c.prototype.loadLocations=function(){var d=new XMLHttpRequest;d.open('GET','extended.json'),d.send(),d.addEventListener('load',function(){if(4==d.readyState&&200==d.status){var e=JSON.parse(d.responseText);this.drawLocations(e)}}.bind(this))},c.init=function(){var d=document.querySelector('.googlemap'); d && (window.ioMap = new c(d))},a.exports=c},53:function(a,b,c){var d=c(5);d.init()}});
